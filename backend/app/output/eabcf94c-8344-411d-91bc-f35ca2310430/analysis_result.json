{
  "total_score": 6.029166666666667,
  "frame_count": 116,
  "phase_analysis": {
    "準備フェーズ": {
      "score": 6.0
    },
    "トスフェーズ": {
      "score": 5.0
    },
    "バックスイングフェーズ": {
      "score": 8.0
    },
    "インパクトフェーズ": {
      "score": 5.0
    },
    "フォロースルーフェーズ": {
      "score": 6.4
    }
  },
  "advice": {
    "summary": "フォームに改善の余地があります。基礎から見直しましょう。",
    "improvements": [],
    "drills": [],
    "enhanced": true,
    "detailed_advice": "【テニスサービス動作解析結果に基づく詳細アドバイス】\n\n---\n\n## 1. 🏆 総合技術評価\n現在のフォームは初心者～中級者レベルに近く、トップレベルの選手と比べて、パワー伝達の効率性や安定性が不足しています。特に体幹の捻りと腕のタイミング、トスの高さと位置調整に課題があり、スピードと精度の両立が困難な状態です。これにより、威力とコントロールが不安定なため、さらなる技術習得と洗練が必要です。\n\n---\n\n## 2. 🔬 バイオメカニクス分析\n\n### 主要改善点（上位５つ）\n\n**1. スタンスの広さ**  \n現在：やや狭く、安定性に欠ける。理想：肩幅＋αの広さ（約10cm広げる）。広すぎると動きが制限されるため、自然な広さを確保し、重心を低く保つことで安定性とパワーを向上させる。\n\n**2. 肘の位置・高さ**  \n現在：肘がやや低く、引きつけすぎている。理想：肘を肩よりやや高い位置（約15cm）に保ち、リリースポイントを安定させる。これによりスイングの一貫性とパワー伝達が改善される。\n\n**3. 膝の曲げ角度**  \n現在：膝が浅く（約120度未満）、重心移動が不十分。理想：膝を約140-150度に曲げ、体重を後方から前方へスムーズに移動させる。これによりパワーとコントロールが向上。\n\n**4. 手首の使い方**  \n現在：手首を過度に固定または過剰に動かす傾向。理想：リリース時に自然なスナップを加え、手首はリラックスさせる。これでスピードとスピンのコントロールが向上。\n\n**5. フォロースルーの姿勢**  \n現在：短く止まる傾向。理想：体の横を通る長いフォロースルーを確立し、体重移動と腕の流れをスムーズに。これにより威力と安定性が増す。\n\n---\n\n## 3. 🏅 世界トップ選手比較\nフェデラーやジョコビッチは、体幹の回旋とリリースタイミング、トスの一貫性が非常に高い。一方、ナダルは脚の使い方と安定した腰の動きに優れる。彼らは全身の連動性と微調整を徹底し、無駄のない動作と高度なタイミング制御を実現している。到達目標は、これらの連動性と安定性を身につけ、パワーとコントロールの両立を目指すこと。\n\n---\n\n## 4. 🎯 8週間改善プログラム\n\n### 第1-2週：基礎修正期  \nスタンスの拡大、トス位置の調整、肘の高さを意識させる基本練習を中心に行います。トスの正確性と肘の位置保持を徹底し、安定した準備姿勢を築きます。  \n【目標】安定したトスと基本フォームの確立。\n\n### 第3-4週：技術統合期  \n体幹捻りと重心移動の連動、フォロースルーの長さと流れを練習。動画を使った自己分析とコーチ指導を取り入れ、動作の一貫性を高める。  \n【目標】動作の流れとパワー伝達の効率化。\n\n### 第5-6週：実戦応用期  \n実践的な場面を想定し、タイミングとコースのコントロール練習を強化。フットワークと動きながらのスイングを統合。試合シナリオを想定した練習も行う。  \n【目標】実戦での安定性と多様性の向上。\n\n### 第7-8週：完成期  \nフォームの微調整とパフォーマンスの最大化。疲労下でも一定のフォームを維持し、試合での再現性を高める。ビデオレビューとフィードバックを重視。  \n【目標】トップレベルの安定したサービスの実現。\n\n---\n\n## 5. 🏋️ 専門フィジカル強化プログラム\n\n### A. 下半身パワー強化（週3回）  \n• スクワット（バーベル50-70kg）×8回×4セット  \n• プライオメトリクス（ボックスジャンプ）×10回×3セット  \n\n### B. 体幹安定化（週4回）  \n• プランク（45秒×3セット）  \n• 体幹ローテーション（バイシクルクランチ）×20回×3セット  \n\n### C. 上半身連動性（週2回）  \n•肩甲骨ストレッチ＆可動域エクササイズ×10回×3セット  \n•ローテーターカフ（軽負荷ダンベル）×15回×3セット  \n\n---\n\n## 6. 🧠 メンタル・戦術強化\n\n### A. 集中力向上  \n練習前に5分間の深呼吸とルーティン（例：ストレッチ→イメージトレーニング→ウォームアップ）を確立。パフォーマンス中は呼吸を意識し、リラックスと集中を促す。\n\n### B. 実戦確認システム  \n練習中のチェックリスト：  \n• [ ] 膝角度：155-165度をキープ  \n• [ ] 肘高さ：肩より8-12cm高い位置  \n• [ ] トス位置：前方12-15cm、右側5-8cm  \n• [ ] 体重移動：0.3-0.4秒で完了  \n• [ ] フォロースルー：体を横切る軌道  \n\nこれらのポイントを意識しながら定期的な振り返りと動画分析を行い、改善を図ることを推奨します。",
    "user_concerns": ""
  },
  "user_concerns": "",
  "tiered_evaluation": {
    "skill_level": "intermediate",
    "skill_level_name": "中級者",
    "expected_score_range": [
      5.0,
      7.0
    ],
    "total_score": 6.919166666666666,
    "component_scores": {
      "knee_movement": 0.30000000000000004,
      "elbow_position": 2.04,
      "body_rotation": 1.7999999999999998,
      "toss_trajectory": 0.8999999999999999,
      "follow_through": 1.6,
      "timing": 0.2791666666666667
    },
    "evaluation_notes": [
      "技術レベル: 中級者",
      "期待スコア範囲: 5.0-7.0点",
      "✅ 期待範囲内の適切な技術レベルです",
      "📈 中級者として着実な技術を身につけています"
    ],
    "is_tiered_evaluation": true
  },
  "preprocessing": {
    "success": true,
    "duration": 0,
    "fps": 30
  },
  "pose_detection": {
    "success": true,
    "detected_frames": 110,
    "confidence_avg": 0.0
  },
  "technical_analysis": {
    "knee_movement": {
      "max_bend_angle": 4.536552047872268,
      "max_bend_frame": 112,
      "timing_score": 8.0,
      "depth_score": 4.0,
      "overall_score": 6.0,
      "issues": [
        "膝の曲げが遅すぎます",
        "膝の曲げが大幅に深すぎます"
      ],
      "recommendations": [
        "膝の曲げを少し浅くして、バランスを保ちましょう",
        "もう少し早めに膝を曲げ始めましょう"
      ]
    },
    "elbow_position": {
      "average_height": 0.5,
      "shoulder_relative_position": 0,
      "height_score": 10.0,
      "stability_score": 6.0,
      "overall_score": 8.0,
      "issues": [
        "肘の動きが大幅に不安定です"
      ],
      "recommendations": []
    },
    "toss_trajectory": {
      "max_height": 1.1794636845588684,
      "forward_distance": 0.06023120880126953,
      "consistency_score": 0.0,
      "height_score": 6.0,
      "distance_score": 9.0,
      "overall_score": 5.0,
      "issues": [
        "トスが大幅に高すぎます",
        "トスの前方への投げがやや不足しています",
        "トスの軌道が大幅に不安定です"
      ],
      "recommendations": [
        "トスの高さを少し抑えて、コントロールを向上させましょう"
      ]
    },
    "body_rotation": {
      "max_shoulder_rotation": 174.22783377591998,
      "max_hip_rotation": 172.07549165213803,
      "shoulder_score": 5.0,
      "hip_score": 5.0,
      "overall_score": 5.0,
      "issues": [
        "肩の回転が過度です",
        "腰の回転が過度です"
      ],
      "recommendations": [
        "肩の回転を少し抑えて、コントロールを向上させましょう"
      ]
    },
    "timing": {
      "total_duration": 3.8666666666666667,
      "phase_scores": {
        "preparation": 5.5,
        "ball_toss": 5.5,
        "trophy_position": 2.0,
        "acceleration": 8.5,
        "contact": 10.0,
        "follow_through": 2.0
      },
      "overall_score": 5.583333333333333,
      "issues": [
        "trophy_positionフェーズが短すぎます",
        "follow_throughフェーズが長すぎます"
      ],
      "recommendations": [
        "各フェーズのタイミングを意識して、リズムの良いサーブを心がけましょう",
        "メトロノームを使った練習で、一定のリズムを身につけましょう"
      ]
    },
    "follow_through": {
      "swing_completion": {
        "score": 5.0,
        "completion_rate": -2.3406421144803367,
        "horizontal_movement": -0.002551853656768799,
        "vertical_movement": -0.6996407806873322
      },
      "body_rotation_completion": {
        "score": 8.0,
        "final_rotation": 169.7429173454398,
        "max_rotation": 174.22783377591998,
        "rotation_consistency": 0.0
      },
      "balance_maintenance": {
        "score": 6.0,
        "left_stability": 0.0,
        "right_stability": 0.0,
        "overall_stability": 0.0
      },
      "racket_path": {
        "score": 7.0,
        "path_smoothness": 0.4805161652389084,
        "path_quality": 0.4805161652389084
      },
      "overall_score": 6.4,
      "issues": [
        "ラケットの振り抜きが不完全です",
        "バランスの維持に問題があります"
      ],
      "recommendations": [
        "フォロースルーの完成度を高めましょう",
        "バランスを保ちながらの振り抜きを練習しましょう"
      ]
    }
  },
  "serve_phases": {
    "preparation": {
      "start_frame": 0,
      "end_frame": 1,
      "duration": 0.03333333333333333,
      "key_events": [
        "stance_setup",
        "initial_position"
      ]
    },
    "ball_toss": {
      "start_frame": 1,
      "end_frame": 10,
      "duration": 0.3,
      "key_events": [
        "toss_initiation",
        "ball_release"
      ]
    },
    "trophy_position": {
      "start_frame": 10,
      "end_frame": -5,
      "duration": -0.5,
      "key_events": [
        "trophy_formation",
        "weight_transfer"
      ]
    },
    "acceleration": {
      "start_frame": -5,
      "end_frame": 7,
      "duration": 0.4,
      "key_events": [
        "racket_acceleration",
        "kinetic_chain"
      ]
    },
    "contact": {
      "start_frame": 7,
      "end_frame": 10,
      "duration": 0.1,
      "key_events": [
        "ball_contact",
        "maximum_reach"
      ]
    },
    "follow_through": {
      "start_frame": 10,
      "end_frame": 115,
      "duration": 3.5,
      "key_events": [
        "deceleration",
        "landing"
      ]
    }
  }
}